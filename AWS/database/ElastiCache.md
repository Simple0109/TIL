# ElastiCache
フルマネージドのインメモリ型キャッシング機能を提供するサービス  
アプリケーションのパフォーマンスを向上させ、レイテンシをマイクロ秒レベルに短くできる  
* `インメモリデータベース`
RDSなどでは処理はメモリ、データはストレージで管理しているが、インメモリデータベースは処理もデータもメモリで管理している  
通常RDSはアプリケーションからリクエストのあったデータを取り出し、それをメモリに渡しソート処理などを行う   
インメモリサービスではメモリにデータを保存しているため、メモリ上のデータをメモリで処理してアプリケーションにレスポンスを返すことができる  
メモリは上記のように素早く処理することができるが、メモリへの電源供給が絶たれると、データが消えてしまう**揮発性**という特性を持つ  
メモリは容量あたりの単価も高いため、データの永続化には向いていない
## ElasctiCacheの使い方
使い方としてはキャッシュと同じように、よく使うデータを一時的にElastiCacheに保存しておいて、いつでもすぐに渡せる状態にしておく 
このようにすることでアプリケーションは最初にElastiCacheに問い合わせをして、必要なデータをElastiCacheが持っていなければRDSなどに取得しにいくという仕組みができる 
## memcachedとRedis
ElastiCacheには**memcached**と**Redis**の2種類がある  
### memcached
最小単位をノード（EC2インスタンスに相当）と呼び、このノードの組み合わせをクラスターよ呼ぶ 
memcachedにおけるクラスターはノードを増減することで不可を分散できる。ノードの分散はアプリケーション側から指示を行う 
マルチスレッドで動作し、データを永続化できない。また、データ型としては文字列のみをサポートしている  
* `マルチスレッド`
一度で複数の処理を同時に行うことができる。そのため単純なデータを扱うとき、高い性能を発揮する
### Redis
Redisのクラスターはノードのエンドポイントを自ら把握できるので、memcachedのようにアプリケーションがノードの管理を行う必要はない  
あるノードに問題が発生した場合、自動的に異なるノードに切り替えデータを複製することができる。これを**シャーディング**と呼ぶ。**シャーディング**によってユーザーはノード管理の手間を削減できる  
シングルスレッドで動作し、スナップショットを取りS3に保存することで、データを永続化することができる。またデータ型としては文字列、リスト、セット、ソートセット、ハッシュテーブル、地理空間、ストリーム、etc...と様々な型をサポートしている  


# 参考記事
[イラストで理解するElastiCache](https://zenn.dev/fdnsy/articles/6dd98ba5318bb6)
[イラストで理解するElastiCacheのスケーリング](https://zenn.dev/fdnsy/articles/727864f43d9e67)
[【AWS入門】Amazon ElastiCacheとは？redisとmemcachedの違いやユースケース、料金について解説](https://cloudnavi.nhn-techorus.com/archives/4270)